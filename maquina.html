<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Máquina de Corte Directo - Simulación</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        nav {
            background-color: var(--dark-color);
            padding: 0.5rem;
        }
        
        nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
        }
        
        nav ul li {
            margin: 0 1rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav ul li a:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        h1, h2, h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        p {
            margin-bottom: 1.5rem;
        }
        
        .section {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .simulation-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 2rem 0;
        }
        
        .canvas-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
            background-color: #f9f9f9;
        }
        
        canvas {
            width: 100%;
            height: 100%;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 1rem;
            width: 100%;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            min-width: 200px;
        }
        
        label {
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        
        input[type="range"] {
            width: 100%;
        }
        
        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            background-color: var(--secondary-color);
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        button.reset {
            background-color: var(--accent-color);
        }
        
        button.reset:hover {
            background-color: #c0392b;
        }
        
        .results {
            width: 100%;
            max-width: 800px;
            margin-top: 2rem;
        }
        
        .results table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .results th, .results td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .results th {
            background-color: #f2f2f2;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            nav ul li {
                margin: 0.5rem 0;
            }
            
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Máquina de Corte Directo para Suelos</h1>
        <p>Simulación interactiva para ingeniería civil</p>
    </header>
    
    <nav>
        <ul>
            <li><a href="#introduccion">Introducción</a></li>
            <li><a href="#principios">Principios</a></li>
            <li><a href="#simulacion">Simulación</a></li>
            <li><a href="#aplicaciones">Aplicaciones</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <section id="introduccion" class="section">
            <h2>Introducción a la Máquina de Corte Directo</h2>
            <p>La máquina de corte directo es un equipo de laboratorio utilizado en geotecnia para determinar la resistencia al corte de suelos. Esta resistencia es un parámetro fundamental en el diseño de cimentaciones, muros de contención, taludes y otras estructuras geotécnicas.</p>
            <p>El ensayo consiste en aplicar una carga normal constante sobre una muestra de suelo y luego aplicar gradualmente una fuerza de corte hasta que la muestra falle. Los resultados permiten calcular los parámetros de resistencia al corte: cohesión (c) y ángulo de fricción interna (φ).</p>
        </section>
        
        <section id="principios" class="section">
            <h2>Principios de Operación</h2>
            <p>La máquina de corte directo consta de los siguientes componentes principales:</p>
            <ul>
                <li>Caja de corte dividida en dos mitades</li>
                <li>Sistema de aplicación de carga normal</li>
                <li>Sistema de aplicación de carga de corte</li>
                <li>Medidores de deformación y carga</li>
                <li>Mecanismo para controlar la velocidad de corte</li>
            </ul>
            <p>Durante el ensayo, la muestra de suelo se coloca en la caja de corte, se aplica una carga normal constante, y luego se aplica una fuerza de corte que aumenta gradualmente hasta que se produce la falla. Se registran las deformaciones y las cargas aplicadas para posterior análisis.</p>
        </section>
        
        <section id="simulacion" class="section">
            <h2>Simulación de la Máquina de Corte Directo</h2>
            <p>Utilice los controles siguientes para interactuar con la simulación. Ajuste los parámetros del suelo y observe cómo afectan a la resistencia al corte.</p>
            
            <div class="simulation-container">
                <div class="canvas-container">
                    <canvas id="simulationCanvas"></canvas>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label for="cohesion">Cohesión (c) [kPa]:</label>
                        <input type="range" id="cohesion" min="0" max="50" value="10">
                        <span id="cohesionValue">10 kPa</span>
                    </div>
                    
                    <div class="control-group">
                        <label for="friction">Ángulo de fricción (φ) [°]:</label>
                        <input type="range" id="friction" min="0" max="45" value="30">
                        <span id="frictionValue">30°</span>
                    </div>
                    
                    <div class="control-group">
                        <label for="normalStress">Esfuerzo normal (σ) [kPa]:</label>
                        <input type="range" id="normalStress" min="50" max="500" value="200">
                        <span id="normalStressValue">200 kPa</span>
                    </div>
                </div>
                
                <div class="button-group">
                    <button id="startBtn">Iniciar Ensayo</button>
                    <button id="resetBtn" class="reset">Reiniciar</button>
                </div>
                
                <div class="results">
                    <h3>Resultados del Ensayo</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Parámetro</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Resistencia al corte (τ) [kPa]</td>
                                <td id="shearStrength">-</td>
                            </tr>
                            <tr>
                                <td>Deformación horizontal [mm]</td>
                                <td id="horizontalDeformation">-</td>
                            </tr>
                            <tr>
                                <td>Fuerza de corte [N]</td>
                                <td id="shearForce">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        
        <section id="aplicaciones" class="section">
            <h2>Aplicaciones en Ingeniería Civil</h2>
            <p>Los parámetros de resistencia al corte obtenidos con la máquina de corte directo son esenciales para:</p>
            <ul>
                <li>Diseño de cimentaciones superficiales y profundas</li>
                <li>Análisis de estabilidad de taludes</li>
                <li>Diseño de muros de contención</li>
                <li>Estudio de capacidad de carga del suelo</li>
                <li>Análisis de presiones laterales del terreno</li>
            </ul>
            <p>La simulación presentada permite comprender visualmente cómo los diferentes parámetros del suelo afectan su comportamiento frente a esfuerzos de corte, lo que es fundamental para el diseño seguro de estructuras geotécnicas.</p>
        </section>
    </div>
    
    <footer>
        <p>Simulación de Máquina de Corte Directo para Suelos - Herramienta educativa para ingeniería civil</p>
        <p>© 2023 - Todos los derechos reservados</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('simulationCanvas');
            const ctx = canvas.getContext('2d');
            
            // Ajustar tamaño del canvas
            function resizeCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
                drawInitialState();
            }
            
            // Variables de control
            let cohesion = 10;
            let frictionAngle = 30;
            let normalStress = 200;
            let animationId = null;
            let shearDisplacement = 0;
            let maxShearDisplacement = 300;
            
            // Elementos de la interfaz
            const cohesionSlider = document.getElementById('cohesion');
            const frictionSlider = document.getElementById('friction');
            const normalStressSlider = document.getElementById('normalStress');
            const cohesionValue = document.getElementById('cohesionValue');
            const frictionValue = document.getElementById('frictionValue');
            const normalStressValue = document.getElementById('normalStressValue');
            const startBtn = document.getElementById('startBtn');
            const resetBtn = document.getElementById('resetBtn');
            const shearStrengthElem = document.getElementById('shearStrength');
            const horizontalDeformationElem = document.getElementById('horizontalDeformation');
            const shearForceElem = document.getElementById('shearForce');
            
            // Inicializar valores
            cohesionSlider.value = cohesion;
            frictionSlider.value = frictionAngle;
            normalStressSlider.value = normalStress;
            cohesionValue.textContent = `${cohesion} kPa`;
            frictionValue.textContent = `${frictionAngle}°`;
            normalStressValue.textContent = `${normalStress} kPa`;
            
            // Event listeners
            cohesionSlider.addEventListener('input', function() {
                cohesion = parseInt(this.value);
                cohesionValue.textContent = `${cohesion} kPa`;
                if (!animationId) drawInitialState();
            });
            
            frictionSlider.addEventListener('input', function() {
                frictionAngle = parseInt(this.value);
                frictionValue.textContent = `${frictionAngle}°`;
                if (!animationId) drawInitialState();
            });
            
            normalStressSlider.addEventListener('input', function() {
                normalStress = parseInt(this.value);
                normalStressValue.textContent = `${normalStress} kPa`;
                if (!animationId) drawInitialState();
            });
            
            startBtn.addEventListener('click', startSimulation);
            resetBtn.addEventListener('click', resetSimulation);
            
            // Dibujar estado inicial
            function drawInitialState() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Dibujar la caja de corte
                const boxWidth = canvas.width * 0.8;
                const boxHeight = canvas.height * 0.5;
                const boxX = (canvas.width - boxWidth) / 2;
                const boxY = (canvas.height - boxHeight) / 2;
                
                // Mitad inferior de la caja
                ctx.fillStyle = '#95a5a6';
                ctx.fillRect(boxX, boxY + boxHeight/2, boxWidth, boxHeight/2);
                
                // Mitad superior de la caja
                ctx.fillStyle = '#7f8c8d';
                ctx.fillRect(boxX, boxY, boxWidth, boxHeight/2);
                
                // Línea de separación
                ctx.strokeStyle = '#34495e';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(boxX, boxY + boxHeight/2);
                ctx.lineTo(boxX + boxWidth, boxY + boxHeight/2);
                ctx.stroke();
                
                // Muestra de suelo
                const soilWidth = boxWidth * 0.9;
                const soilHeight = boxHeight * 0.8;
                const soilX = boxX + (boxWidth - soilWidth) / 2;
                const soilY = boxY + (boxHeight - soilHeight) / 2;
                
                ctx.fillStyle = getSoilColor();
                ctx.fillRect(soilX, soilY, soilWidth, soilHeight);
                
                // Texto
                ctx.fillStyle = '#2c3e50';
                ctx.font = '14px Arial';
                ctx.fillText('Muestra de suelo', soilX + 10, soilY + 20);
                ctx.fillText(`c = ${cohesion} kPa, φ = ${frictionAngle}°`, soilX + 10, soilY + 40);
                
                // Fuerza normal
                const arrowStartX = boxX + boxWidth/2;
                const arrowStartY = boxY - 30;
                drawArrow(arrowStartX, arrowStartY, arrowStartX, boxY, 'σ = ' + normalStress + ' kPa');
            }
            
            function getSoilColor() {
                // Color basado en parámetros del suelo
                const r = 139 + cohesion * 2;
                const g = 69 + frictionAngle * 2;
                const b = 19;
                return `rgb(${r}, ${g}, ${b})`;
            }
            
            function drawArrow(fromX, fromY, toX, toY, text) {
                const headlen = 10;
                const angle = Math.atan2(toY - fromY, toX - fromX);
                
                // Línea principal
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(fromX, fromY);
                ctx.lineTo(toX, toY);
                ctx.stroke();
                
                // Punta de flecha
                ctx.beginPath();
                ctx.moveTo(toX, toY);
                ctx.lineTo(toX - headlen * Math.cos(angle - Math.PI/6), toY - headlen * Math.sin(angle - Math.PI/6));
                ctx.lineTo(toX - headlen * Math.cos(angle + Math.PI/6), toY - headlen * Math.sin(angle + Math.PI/6));
                ctx.closePath();
                ctx.fillStyle = '#e74c3c';
                ctx.fill();
                
                // Texto
                ctx.fillStyle = '#2c3e50';
                ctx.font = '12px Arial';
                ctx.fillText(text, fromX - 40, fromY - 10);
            }
            
            function startSimulation() {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                    startBtn.textContent = 'Continuar';
                    return;
                }
                
                startBtn.textContent = 'Pausar';
                shearDisplacement = 0;
                
                function animate() {
                    if (shearDisplacement >= maxShearDisplacement) {
                        cancelAnimationFrame(animationId);
                        animationId = null;
                        startBtn.textContent = 'Iniciar Ensayo';
                        return;
                    }
                    
                    shearDisplacement += 2;
                    updateSimulation();
                    animationId = requestAnimationFrame(animate);
                }
                
                animate();
            }
            
            function updateSimulation() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Dibujar la caja de corte
                const boxWidth = canvas.width * 0.8;
                const boxHeight = canvas.height * 0.5;
                const boxX = (canvas.width - boxWidth) / 2;
                const boxY = (canvas.height - boxHeight) / 2;
                
                // Mitad inferior de la caja (fija)
                ctx.fillStyle = '#95a5a6';
                ctx.fillRect(boxX, boxY + boxHeight/2, boxWidth, boxHeight/2);
                
                // Mitad superior de la caja (se mueve)
                const displacement = shearDisplacement / 10;
                ctx.fillStyle = '#7f8c8d';
                ctx.fillRect(boxX + displacement, boxY, boxWidth, boxHeight/2);
                
                // Muestra de suelo deformada
                const soilWidth = boxWidth * 0.9;
                const soilHeight = boxHeight * 0.8;
                const soilX = boxX + (boxWidth - soilWidth) / 2;
                const soilY = boxY + (boxHeight - soilHeight) / 2;
                
                ctx.fillStyle = getSoilColor();
                ctx.fillRect(soilX, soilY, soilWidth, soilHeight);
                
                // Dibujar línea de falla
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(soilX, soilY + soilHeight/2);
                ctx.lineTo(soilX + displacement, soilY + soilHeight/2);
                ctx.lineTo(soilX + soilWidth + displacement, soilY + soilHeight/2);
                ctx.stroke();
                
                // Fuerza normal
                const arrowStartX = boxX + boxWidth/2 + displacement;
                const arrowStartY = boxY - 30;
                drawArrow(arrowStartX, arrowStartY, arrowStartX, boxY, 'σ = ' + normalStress + ' kPa');
                
                // Fuerza de corte
                const shearArrowX = boxX + boxWidth + 30;
                const shearArrowY = boxY + boxHeight/2;
                drawArrow(shearArrowX, shearArrowY, shearArrowX - 20, shearArrowY, 'τ');
                
                // Calcular y mostrar resultados
                const frictionRad = frictionAngle * Math.PI / 180;
                const shearStrength = cohesion + normalStress * Math.tan(frictionRad);
                const currentShear = shearStrength * (shearDisplacement / maxShearDisplacement);
                
                shearStrengthElem.textContent = shearStrength.toFixed(2);
                horizontalDeformationElem.textContent = (displacement).toFixed(2);
                shearForceElem.textContent = (currentShear * 1000).toFixed(2); // Convertir a Newtons
            }
            
            function resetSimulation() {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                
                startBtn.textContent = 'Iniciar Ensayo';
                shearDisplacement = 0;
                drawInitialState();
                
                // Reiniciar resultados
                shearStrengthElem.textContent = '-';
                horizontalDeformationElem.textContent = '-';
                shearForceElem.textContent = '-';
            }
            
            // Inicializar
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
        });
    </script>
</body>
</html>
